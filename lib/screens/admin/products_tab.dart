\nimport \'package:cloud_firestore/cloud_firestore.dart\';\nimport \'package:flutter/material.dart\';\nimport \'package:myapp/constants.dart\';\nimport \'package:myapp/screens/admin/add_edit_product_screen.dart\';\n\nclass ProductsTab extends StatelessWidget {\n  const ProductsTab({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      body: StreamBuilder<QuerySnapshot>(\n        stream: FirebaseFirestore.instance.collection(PRODUCTS_COLLECTION_PATH).snapshots(),\n        builder: (context, snapshot) {\n          if (snapshot.hasError) {\n            return const Center(child: Text(\'Something went wrong\'));\n          }\n\n          if (snapshot.connectionState == ConnectionState.waiting) {\n            return const Center(child: CircularProgressIndicator());\n          }\n\n          if (snapshot.data!.docs.isEmpty) {\n            return const Center(child: Text(\'No products found. Add one!\'));\n          }\n\n          return ListView.builder(\n            itemCount: snapshot.data!.docs.length,\n            itemBuilder: (context, index) {\n              final doc = snapshot.data!.docs[index];\n              final product = doc.data() as Map<String, dynamic>;\n\n              return Card(\n                margin: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),\n                child: ListTile(\n                  leading: product.containsKey(\'imageUrl\') && product[\'imageUrl\'] != \'\'\n                      ? Image.network(product[\'imageUrl\'], width: 50, height: 50, fit: BoxFit.cover)\n                      : const Icon(Icons.image, size: 50),\n                  title: Text(product[\'name\'] ?? \'No Name\'),\n                  subtitle: Text(\'Price: \${product[\'price\'] ?? 0}\'),\n                  trailing: Row(\n                    mainAxisSize: MainAxisSize.min,\n                    children: [\n                      IconButton(\n                        icon: const Icon(Icons.edit, color: Colors.blue),\n                        onPressed: () {\n                          Navigator.of(context).push(\n                            MaterialPageRoute(\n                              builder: (context) => AddEditProductScreen(documentId: doc.id),\n                            ),\n                          );\n                        },\n                      ),\n                      IconButton(\n                        icon: const Icon(Icons.delete, color: Colors.red),\n                        onPressed: () async {\n                          // Show confirmation dialog before deleting\n                          final confirm = await showDialog(\n                            context: context,\n                            builder: (context) => AlertDialog(\n                              title: const Text(\'Are you sure?\'),\n                              content: const Text(\'Do you want to delete this product?\'),\n                              actions: [\n                                TextButton(onPressed: () => Navigator.of(context).pop(false), child: const Text(\'No\')),\n                                TextButton(onPressed: () => Navigator.of(context).pop(true), child: const Text(\'Yes\')),\n                              ],\n                            ),\n                          );\n                          if (confirm == true) {\n                            await FirebaseFirestore.instance.collection(PRODUCTS_COLLECTION_PATH).doc(doc.id).delete();\n                          }\n                        },\n                      ),\n                    ],\n                  ),\n                ),\n              );\n            },\n          );\n        },\n      ),\n      floatingActionButton: FloatingActionButton(\n        onPressed: () {\n          Navigator.of(context).push(\n            MaterialPageRoute(\n              builder: (context) => const AddEditProductScreen(),\n            ),\n          );\n        },\n        child: const Icon(Icons.add),\n        tooltip: \'Add Product\',\n      ),\n    );\n  }\n}\n